{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"54644986-605fde0d6b0637c4334fe436a\";\n\nexport async function getImagesByQuery(query, page) {\n    try{\n        const res = await axios(\"https://pixabay.com/api/\", {\n            params: {\n                key: API_KEY,\n                q: query,\n                page: page,\n                per_page: 15,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true\n            }\n        });\n        return res.data;\n    }\n    catch(error) {\n        console.log(\"Error\", error);        \n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst container = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\"#loader\");\nconst btnMore = document.querySelector(\".showMoreBtn\");\n\nconst lightBox = new SimpleLightbox('.gallery a', {\n    captionsData: \"alt\",\n    captionPosition: \"bottom\",\n    captionDelay: 250\n})\n\nexport function createGallery(images) {\n    const markup = images.map(({ webformatURL, tags, largeImageURL, likes, views, comments, downloads}) => `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${webformatURL}\"\n                    alt=\"${tags}\"\n                />\n            </a>\n            <ul class=\"image-details\">\n                <li class=\"image-item\">\n                    <p class=\"imageText\">Likes</p>\n                    <p class=\"imageText-item\">${likes}</p>\n                </li>\n                <li class=\"image-item\">\n                    <p class=\"imageText\">Views</p>\n                    <p class=\"imageText-item\">${views}</p>\n                </li>\n                <li class=\"image-item\">\n                    <p class=\"imageText\">Comments</p>\n                    <p class=\"imageText-item\">${comments}</p>\n                </li>\n                <li class=\"image-item\">\n                    <p class=\"imageText\">Downloads</p>\n                    <p class=\"imageText-item\">${downloads}</p>\n                </li>\n            </ul>\n        </li>\n    `).join(\"\");\n\n    container.insertAdjacentHTML(\"beforeend\", markup);\n\n    lightBox.refresh();\n};\n\nexport function clearGallery() { \n    container.innerHTML = '';\n};\n\nexport function showLoader() {\n    loader.hidden = false;\n};\n\nexport function hideLoader() { \n    loader.hidden = true;\n};\n\nexport function showLoadMoreButton() { \n    btnMore.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreButton() {\n    btnMore.classList.add(\"hidden\");\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\"\n\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton\n} from \"./js/render-functions\";\n\nconst form = document.querySelector(\".form\");\nconst formInput = document.querySelector(\".formInput\");\nconst showMoreBtn = document.querySelector(\".showMoreBtn\");\n\nform.addEventListener(\"submit\", handleSubmit);\n\nlet page = 1;\nlet per_page = 15;\nlet query = \"\";\n\nasync function handleSubmit(event){\n    event.preventDefault();\n\n    query = formInput.value.trim();\n\n    if (!query) {\n        iziToast.warning({\n            message: \"Input cannot be empty!\",\n            position: \"topRight\"\n        });\n        return;\n    }\n\n    page = 1;\n    formInput.value = \"\";\n    \n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n    try {\n        const res = await getImagesByQuery(query, page)  \n        \n        if (res.hits.length === 0) {\n            iziToast.error({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight'\n            });\n            return;\n        }\n\n        createGallery(res.hits);\n        \n        if (res.totalHits > per_page) {\n            showLoadMoreButton();\n        } \n    }\n        catch(error) {\n            console.log(\"Error\", error);\n            iziToast.error({\n            message: \"Something went wrong. Please try again later.\",\n            position: \"topRight\",\n        });\n        } finally {\n            hideLoader();\n        }\n}\n\nshowMoreBtn.addEventListener(\"click\", async () => {\n    try {\n        hideLoadMoreButton();\n        showLoader();\n        page += 1;\n        const data = await getImagesByQuery(query, page);\n        \n        createGallery(data.hits);\n\n        const card = document.querySelector(\".gallery-item\");\n\n        if (card) {\n        const { height } = card.getBoundingClientRect();\n\n        window.scrollBy({\n            top: height * 2,\n            behavior: \"smooth\"\n        });\n        }\n\n        const totalPages = Math.ceil(data.totalHits / per_page);\n\n        if (page >= totalPages) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\"\n            });\n        } showLoadMoreButton();\n    }\n    catch (error) {\n        iziToast.error({\n            message: \"Something went wrong. Please try again.\",\n            position: \"topRight\"\n        });\n    } finally {\n        hideLoader();\n    }\n});"],"names":["API_KEY","getImagesByQuery","query","page","axios","error","container","loader","btnMore","lightBox","SimpleLightbox","createGallery","images","markup","webformatURL","tags","largeImageURL","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","formInput","showMoreBtn","handleSubmit","per_page","event","iziToast","res","data","card","height","totalPages"],"mappings":"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"}